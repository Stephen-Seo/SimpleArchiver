<link href="style.css" rel="stylesheet" />
<h1>NAME</h1>
<p>simplearchiver - An alternative to tar</p>
<h1>SYNOPSIS</h1>
<p><strong>simplearchiver</strong> [<strong>-h | --help</strong>] [
options ] (<strong>-c | -t | -x</strong>) (<strong>-f</strong>
<em>filename</em>) [--] <em>paths...</em></p>
<h1>DESCRIPTION</h1>
<p><strong>simplearchiver</strong> archives files/directories into an
archive file with support for any compressor that accepts file data in
standard-input and outputs compressed file data to standard-output.</p>
<p>Unlike tar, when <strong>simplearchiver</strong> uses a compressor
(e.g. with <strong>--compressor</strong> <em>compressor-command</em>),
the data is compressed inside of <strong>simplearchiver</strong>'s file
format, while tar expects the tar file itself to be compressed.</p>
<h1>OPTIONS</h1>
<dl>
<dt><strong>-h</strong>, <strong>--help</strong></dt>
<dd>
<p>Prints the "help text" which lists all options with a brief usage
hint.</p>
</dd>
<dt><strong>-c</strong></dt>
<dd>
<p>Tells <strong>simplearchiver</strong> to be in "create archive file"
mode. This mode causes <strong>simplearchiver</strong> to create the
archive (specified with <strong>-f</strong> <em>file</em>) given the
positional arguments as paths to archive. Note that a positional
argument of "." will cause <strong>simplearchiver</strong> to archive
everything in the current directory (or the directory specified with
<strong>-C</strong> <em>path</em>).</p>
</dd>
<dt><strong>-t</strong></dt>
<dd>
<p>Tells <strong>simplearchiver</strong> to be in "test archive file"
mode. Any archive file specified with <strong>-f</strong> <em>file</em>
will be inspected and its contents and relative metadata will be printed
to standard-error.</p>
</dd>
<dt><strong>-x</strong></dt>
<dd>
<p>Tells <strong>simplearchiver</strong> to be in "extract archive file"
mode. Any archive file specified with <strong>-f</strong> <em>file</em>
will be extracted to the current working directory (or to the directory
specified with <strong>-C</strong> <em>path</em>).</p>
</dd>
<dt><strong>-f</strong> <strong><em>filename</em></strong></dt>
<dd>
<p>Sets the filename to be created in "create archive file" mode,
checked with "test archive file" mode, or extracted from with "extract
archive file" mode. Note that in "create archive file" mode, the file
will not be overwritten if it already exists unless if
<strong>--overwrite-create</strong> is specified. Note that this is not
affected by <strong>-C</strong> <em>directory</em>.</p>
</dd>
<dt><strong>-C</strong> <strong><em>directory</em></strong></dt>
<dd>
<p>Sets the current working directory for archiving or extracting. Note
that this does not affect <strong>-f</strong> <em>filename</em>.</p>
</dd>
<dt><strong>--prefix</strong> <strong><em>prefix</em></strong> |
<strong>--prefix=<em>prefix</em></strong></dt>
<dd>
<p>Sets a prefix-string to be prepended to every extracted
file/directory. Note that if the prefix-string does not end with a "/",
then "/" will be appended to it before it is used. This affects archive
creation and extraction.</p>
</dd>
<dt><strong>--compressor</strong>
<strong><em>compressor_command</em></strong> |
<strong>--compressor=<em>cmd</em></strong></dt>
<dd>
<p>Enables compression and sets the compressor when creating an archive
with the given compressor command. For example,
<strong>--compressor</strong> <em>"gzip"</em>, or
<strong>--compressor</strong>=<em>"xz"</em> can be used. Using this
option requires the use of <strong>--decompressor</strong>
<em>decompressor_command</em>.</p>
</dd>
<dt><strong>--decompressor</strong>
<strong><em>decompressor_command</em></strong> |
<strong>--decompressor=<em>cmd</em></strong></dt>
<dd>
<p>Sets the decompressor to be used when an archive is to be extracted
later. This is done by storing the command verbatim in the archive's
data when creating an archive. For example,
<strong>--decompressor</strong> <em>"gzip -d"</em>, or
<strong>--decompressor</strong>=<em>"unxz"</em> can be used. This option
can also be used when extracting to override the decompressor command
stored in the archive.</p>
</dd>
<dt><strong>--overwrite-create</strong></dt>
<dd>
<p>Tells <strong>simplearchiver</strong> to overwrite the archive file
(specified with <strong>-f</strong> <em>filename</em>) when creating an
archive.</p>
</dd>
<dt><strong>--overwrite-extract</strong></dt>
<dd>
<p>Tells <strong>simplearchiver</strong> to overwrite files when
extracting from an archive file.</p>
</dd>
<dt><strong>--no-abs-symlink</strong></dt>
<dd>
<p>Disables storing of absolute paths for symlinks when they are
archived.</p>
</dd>
<dt><strong>--preserve-symlinks</strong></dt>
<dd>
<p>Preserves symlinks by not changing their paths when they are
archived. By default, symlink paths are regenerated to produce valid
relative and absolute paths that are both stored upon archive
creation.</p>
</dd>
<dt><strong>--no-safe-links</strong></dt>
<dd>
<p>On archive creation, enables storing links that point to any path
that does not exist in the created archive. On archive extraction,
enables creating links that point to any path that does refer to any
extracted file.</p>
</dd>
<dt><strong>--temp-files-dir</strong>
<strong><em>directory</em></strong> |
<strong>--temp-files-dir=<em>dir</em></strong></dt>
<dd>
<p>Sets the directory to store temporary files. Note that temporary
files are only created when creating and archive and when compression is
being used such that the temporary file is a compressed file/chunk and
is stored into the archive after the file/chunk has been fully
compressed. Naturally, these temporary files should be automatically
deleted by <strong>simplearchiver</strong> after they are used. By
default, the directory used is the directory holding the output archive.
If the output is standard-output, then tmpfile(3) is used instead.</p>
</dd>
<dt><strong>--force-tmpfile</strong></dt>
<dd>
<p>Forces temporary files to use tmpfile(3) when they are created. Note
that this option is mutually exclusive with
<strong>--temp-files-dir</strong>.</p>
</dd>
<dt><strong>--write-version</strong>
<strong><em>version_number</em></strong> |
<strong>--write-version=<em>ver</em></strong></dt>
<dd>
<p>Forces <strong>simplearchiver</strong> to use the specified file
format version. Currently there are versions 0 through 5, and the
default is the latest file format. If you are not sure which to use, it
is best to just use the latest version, which is the default.</p>
</dd>
<dt><strong>--chunk-min-size</strong> <strong><em>bytes</em></strong> |
<strong>--chunk-min-size=<em>bytes</em></strong></dt>
<dd>
<p>Sets the minimum chunk size when creating archives. By default, this
is 256MiB. Note that this value must be specified in bytes or with one
of the following suffixes (without spaces): KB, KiB, MB, MiB, GB, or
GiB. "32MiB" is valid but "32 MiB" is not. The behavior is as follows:
combine files into a chunk until the size of the chunk is at least the
"chunk-min-size" value. When it reaches the value, then the chunk is
created/compressed and a new chunk is designated for the remaining files
until there are none left. If there are no more files to put in a chunk
before this limit is reached, then the chunk will simply stop
accumulating files and will be stored/compressed as the last chunk.</p>
</dd>
<dt><strong>--no-pre-sort-files</strong></dt>
<dd>
<p>Do not pre-sort files before they are stored into a new archive. By
default, files are sorted by size such that the largest file is archived
first. If this option is specified, then the files will be stored in an
arbitrary order. This option is mutually exclusive with
"--sort-files-by-name". Note that this option may not apply to file
format 0.</p>
</dd>
<dt><strong>--sort-files-by-name</strong></dt>
<dd>
<p>Sorts files by filename before archiving. This option is mutually
exclusive with "--no-pre-sort-files". Note that this option may not
apply to file format 0.</p>
</dd>
<dt><strong>--no-preserve-empty-dirs</strong></dt>
<dd>
<p>Do not store empty directories in the archive when created. Note that
storing of empty directories is only done for file formats 2 and onwards
by default.</p>
</dd>
<dt><strong>--force-uid</strong> <strong><em>UID</em></strong> |
<strong>--force-uid=<em>UID</em></strong></dt>
<dd>
<p>Force the ownership of all archived items to the given UID when
creating an archive. Note that this option will only take effect on
extraction if the current effective user ID is 0 (root).</p>
</dd>
<dt><strong>--force-user</strong> <strong><em>username</em></strong> |
<strong>--force-user=<em>username</em></strong></dt>
<dd>
<p>Force the ownership of all archived items to the given user when
creating an archive. If the user does not exist on the machine
creating/extracting an archive, then <strong>simplearchiver</strong>
will stop with an error. Note that this option will only take effect on
extraction if the current effective user ID is 0 (root).</p>
</dd>
<dt><strong>--force-gid</strong> <strong><em>GID</em></strong> |
<strong>--force-gid=<em>GID</em></strong></dt>
<dd>
<p>Force the group of all archived items to the given GID when creating
or extracting an archive. Note that this option will only take effect on
extraction if the current effective user ID is 0 (root).</p>
</dd>
<dt><strong>--force-group</strong> <strong><em>groupname</em></strong> |
<strong>--force-group=<em>group</em></strong></dt>
<dd>
<p>Force the group of all archived items to the given group when
creating an archive. If the group does not exist on the machine
creating/extracting an archive, then <strong>simplearchiver</strong>
will stop with an error. Note that this option will only take effect on
extraction if the current effective user ID is 0 (root).</p>
</dd>
<dt><strong>--extract-prefer-uid</strong></dt>
<dd>
<p>Prefer the archive's stored UID over username. By default, the
username stored in the archive is preferred.</p>
</dd>
<dt><strong>--extract-prefer-gid</strong></dt>
<dd>
<p>Prefer the archive's stored GID over groupname. By default, the
groupname stored in the archive is preferred.</p>
</dd>
<dt><strong>--map-user</strong>
<strong><em>UID/Username</em>:<em>UID/Username</em></strong> |
<strong>--map-user=<em>UID/Username</em>:<em>UID/Username</em></strong></dt>
<dd>
<p>Store a mapping from a UID/Username to another UID/Username. This
will be used to convert UIDs when archiving. Note that this option will
only take effect on extraction if the current effective user ID is 0
(root).</p>
</dd>
<dt><strong>--map-group</strong>
<strong><em>GID/Groupname</em>:<em>GID/Groupname</em></strong> |
<strong>--map-group=<em>GID/Groupname</em>:<em>GID/Groupname</em></strong></dt>
<dd>
<p>Store a mapping from a GID/Grouname to another GID/Groupname. This
will be used to convert GIDs when archiving. Note that this option will
only take effect on extraction if the current effective user ID is 0
(root).</p>
</dd>
<dt><strong>--force-file-permissions</strong>
<strong><em>3-OctalValues</em></strong> |
<strong>--force-file-permissions=<em>3-OctalValues</em></strong></dt>
<dd>
<p>Force set permissions for files on archive creation. Note that this
option will only take effect on extraction if the current effective user
ID is 0 (root). For example, a valid value can be 644 or 440.</p>
</dd>
<dt><strong>--force-dir-permissions</strong>
<strong><em>3-OctalValues</em></strong> |
<strong>--force-dir-permissions=<em>3-OctalValues</em></strong></dt>
<dd>
<p>Force set permissions for directories on archive creation. Note that
this option will only take effect on extraction if the current effective
user ID is 0 (root). For example, a valid value can be 755 or 750. Note
that this does not have any effect on empty directories. See the
following option to force permissions on empty directories.</p>
</dd>
<dt><strong>--force-empty-dir-permissions</strong>
<strong><em>3-OctalValues</em></strong> |
<strong>--force-empty-dir-permissions=<em>3-OctalValues</em></strong></dt>
<dd>
<p>Force set permissions for empty directories on archive creation. Note
that this option will only take effect on extraction if the current
effective user ID is 0 (root). For example, a valid value can be 755 or
750. Note that this does not effect intermediate directories that hold
files/directories. See the previous option to force permissions on such
directories.</p>
</dd>
<dt><strong>--whitelist-contains-any</strong>
<strong><em>text</em></strong> |
<strong>--whitelist-contains-any=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only allow
files/directories that contain the specified text. Use this flag
multiple times to add more text entries such that any file/directory
path that has ANY of the specified texts will be
allowed/whitelisted.</p>
</dd>
<dt><strong>--whitelist-contains-all</strong>
<strong><em>text</em></strong> |
<strong>--whitelist-contains-all=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only allow
files/directories that contain the specified text. Use this flag
multiple times to add more text entries such that any file/directory
path that has ALL of the specified texts will be
allowed/whitelisted.</p>
</dd>
<dt><strong>--whitelist-begins-with</strong>
<strong><em>text</em></strong> |
<strong>--whitelist-begins-with=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only allow file/directory
paths that start with the specified text. Use this flag multiple times
to add more text entries such that any path that STARTS with ANY of the
specified texts will be allowed/whitelisted.</p>
</dd>
<dt><strong>--whitelist-ends-with</strong>
<strong><em>text</em></strong> |
<strong>--whitelist-ends-with=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only allow file/directory
paths that end with the specified text. Use this flag multiple times to
add more text entries such that any path that ENDS with ANY of the
specified texts will be allowed/whitelisted.</p>
</dd>
<dt><strong>--blacklist-contains-any</strong>
<strong><em>text</em></strong> |
<strong>--blacklist-contains-any=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only block
files/directories that contain the specified text. Use this flag
multiple times to add more text entries such that any file/directory
path that has ANY of the specified texts will be
blocked/blacklisted.</p>
</dd>
<dt><strong>--blacklist-contains-all</strong>
<strong><em>text</em></strong> |
<strong>--blacklist-contains-all=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only block
files/directories that contain the specified text. Use this flag
multiple times to add more text entries such that any file/directory
path that has ALL of the specified texts will be
blocked/blacklisted.</p>
</dd>
<dt><strong>--blacklist-begins-with</strong>
<strong><em>text</em></strong> |
<strong>--blacklist-begins-with=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only block file/directory
paths that start with the specified text. Use this flag multiple times
to add more text entries such that any path that STARTS with ANY of the
specified texts will be blocked/blacklisted.</p>
</dd>
<dt><strong>--blacklist-ends-with</strong>
<strong><em>text</em></strong> |
<strong>--blacklist-ends-with=<em>text</em></strong></dt>
<dd>
<p>In any archival mode (create/test/extract), only block file/directory
paths that end with the specified text. Use this flag multiple times to
add more text entries such that any path that ENDS with ANY of the
specified texts will be blocked/blacklisted.</p>
</dd>
<dt><strong>--wb-case-insensitive</strong></dt>
<dd>
<p>Makes any whitelist/blacklist option case-insensitive (applies only
to ASCII characters).</p>
</dd>
<dt><strong>--print-file-exts-preset</strong></dt>
<dd>
<p>Prints to stderr the preset used by
<strong>--use-not-compress-file-exts-preset</strong>.</p>
</dd>
<dt><strong>--use-file-exts-preset</strong></dt>
<dd>
<p>Enables a preset of known file extensions to be checked against when
archiving with compression for file format version 6 (and onward). In
other words, each file extension in the preset is added to a set that
will be checked against when checking each file in a chunk. Note that
file extension checking is case insensitive.</p>
</dd>
<dt><strong>--add-file-ext</strong> <strong><em>ext</em></strong> |
<strong>--add-file-ext=<em>ext</em></strong></dt>
<dd>
<p>Adds an extension to the set of known file extensions to be checked
against when archiving with compression for file format version 6 (and
onward). Note that file extension checking is case insensitive.</p>
</dd>
<dt><strong>--allow-double-dot</strong></dt>
<dd>
<p>Allows positional arguments to contain ".." in them.</p>
</dd>
<dt><strong>--version</strong></dt>
<dd>
<p>Prints the current version of <strong>simplearchiver</strong>.</p>
</dd>
<dt><strong>--</strong></dt>
<dd>
<p>Specifies that the following arguments are positional arguments that
refer to items to be archived or items to be tested/extracted.</p>
</dd>
</dl>
<h1>NOTES</h1>
<dl>
<dt><strong>Temporary Files</strong></dt>
<dd>
<p>Whenever <strong>simplearchiver</strong> creates an archive with a
compressor, a temporary file is created to hold the compressed
file/chunk. This is necessary because <strong>simplearchiver</strong> is
designed to be streamable, and the size of the compressed file/chunk is
required before storing the compressed data; Otherwise,
<strong>simplearchiver</strong> cannot store the length of the data
before the data itself in the archive without seeking. Note that by
default, the temporary file is stored in the same directory as the
created archive file. If the output is standard-output or cannot be
accessed, then tmpfile(3) is used. Options that are related to this
behavior are:</p>
</dd>
</dl>
<p><strong>--temp-files-dir</strong></p>
<p><strong>--force-tmpfile</strong></p>
<dl>
<dt><strong>Chunks</strong></dt>
<dd>
<p>Starting in file format version 1 (and up to the latest format),
<strong>simplearchiver</strong> stores files in "chunks". The size of
each chunk is controlled by the <strong>--chunk-min-size</strong> option
and is by default 256MiB. It may be better to use a larger chunk size if
using a compressor with a higher compression level. Suffixes are
supported (without spaces): "KB, KiB, MB, MiB, GB, and GiB". For
example, "32MiB" is valid but "32 MiB" is not. The behavior of chunks is
as follows: combine files into a chunk until the size of the chunk is at
least the "chunk-min-size" value. When it reaches the value, then the
chunk is created/compressed and a new chunk is designated for the
remaining files until there are none left. If there are no more files to
put in a chunk before this limit is reached, then the chunk will simply
stop accumulating files and will be stored/compressed as the last
chunk.</p>
</dd>
<dt><strong>Symbolic Link Handling</strong></dt>
<dd>
<p>By default, <strong>simplearchiver</strong> archives both relative
and absolute paths for every symlink upon archive creation, and on
extraction relative links are preferred. If the symlink points to a path
not archived and <strong>--no-safe-links</strong> is specified, then the
absolute path is preferred on extraction. Also note that absolute paths
can be prevented from being stored on archive creation with
<strong>--no-abs-symlink</strong>. Note that specifying both
<strong>--no-safe-links</strong> and
<strong>--preserve-symlinks</strong> will store all symbolic links as is
when creating an archive.</p>
</dd>
<dt><strong>Conditional Chunk Compression Introduced in File Format
Version 6</strong></dt>
<dd>
<p>By default, <strong>simplearchiver</strong> will always compress
every chunk if a compressor (and decompressor) is specified. Two options
<strong>--use-file-exts-preset</strong> and
<strong>--add-file-ext</strong> add file extensions to a set that is
intially empty when the program starts. Using these flags opts-in to not
compressing every file that has a matching file extension. This is done
by placing every file that matches a "non-compressible-extension" into
the first chunk that is set to not be compressed, even if a compressor
is specified. Note that this does not affect files that do not match the
set of file extensions of files to not compress. If these options are
not used or if no file matches any of the set file extensions, then the
default behavior is used, which is to compress every chunk if a
compressor is specified.</p>
</dd>
</dl>
